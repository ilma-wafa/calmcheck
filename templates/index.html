<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CalmCheck</title>

    <style>
        body {
            background-color: #f5e6d3; /* warm, cozy */
            font-family: Arial, sans-serif;
            text-align: center;
            padding-top: 80px;
            color: #3a2f2f;
        }

        h1 {
            font-size: 38px;
            margin-bottom: 10px;
        }

        p {
            font-size: 16px;
            color: #5a4a4a;
            margin-bottom: 40px;
        }

        .menu button {
            display: block;
            margin: 12px auto;
            padding: 12px 24px;
            font-size: 15px;
            border: none;
            border-radius: 6px;
            background-color: #e7d3b1;
            color: #3a2f2f;
            cursor: pointer;
        }

        .menu button:hover {
            background-color: #dcc39a;
        }
    </style>
</head>
<body>

     <div class="overlay">

        <!-- LANDING SECTION -->
        <div id="landing">
            <h1>How are you feeling right now?</h1>

            <div class="menu">
                <button onclick="startChat('sad')">I am sad</button>
                <button onclick="startChat('overwhelmed')">I feel overwhelmed</button>
                <button onclick="startChat('okay')">I feel okay</button>
                <button onclick="startChat('unknown')">I donâ€™t know</button>
            </div>
        </div>

        <!-- CHAT SECTION -->
        <div id="chat" style="display: none;">
            <div class="chat-box">
                <p id="botMessage"></p>
            </div>

            <div id="followUp" style="display: none;">
            <button onclick="continueChat()">Yes, I want to talk</button>
            <button onclick="exitChat()">Not right now</button>
            </div>

            <button id="exitBtn" onclick="exitChat()">Take a break</button>
        </div>

    <script>

            function startChat(emotion) {
            document.getElementById("landing").style.display = "none";
            document.getElementById("chat").style.display = "block";
            document.getElementById("followUp").style.display = "none";

            fetch("/start-chat", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ emotion: emotion })
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById("botMessage").innerText = data.message;

                setTimeout(() => {
                    document.getElementById("followUp").style.display = "block";
                }, 800);
            });
            }

            function continueChat() {
                fetch("/continue-chat", {
                    method: "POST"
                })
                .then(response => response.json())
                .then(data => {
                    document.getElementById("botMessage").innerText = data.message;
                    document.getElementById("followUp").style.display = "none";
                });
            }

            function exitChat() {
                document.getElementById("chat").style.display = "none";
                document.getElementById("landing").style.display = "block";
                document.getElementById("followUp").style.display = "none";
            }
    </script>


</body>
</html>
